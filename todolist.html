<html>
<head>
    <link rel="stylesheet" href="todo.css">
    
    <script
    src="https://code.jquery.com/jquery-3.4.1.js"
    integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous">  
    </script>
    
    <title>TODOLIST</title>
</head>
<body>
    <div class="container">
        <h1 style="text-align:center">待辦清單ToDoList</h1>
        <div class="panel">
            待辦事項:
            <input type="text" id="input">
            <button id="add">新增</button>
        </div>
        <div class="list"> 
            <div class="toDos" id="draggable" draggable="true">
                <input type="checkbox" class="status" id="content">
                <label for="content">預設</label>
                <button class="delete">X</button>
            </div>

        </div>
    </div>

    <script>
        $(document).ready(function(){
            var i = 0; //i控制label的順序
            $("#add").click(function addcontent(){  //新增事項
                var inputValue = $("#input").val();
                if(inputValue.trim() == ""){ //去掉字符串首尾空格
                    alert("欄位不能為空");
                }
                else{
                    // for(var i =0;i<i+1;i++){
                        var content =
                        `<div class="toDos" id="draggable" draggable="true">
                        <input type="checkbox" class="status" id="content${i}">
                        <label for="content${i}">${inputValue}</label>
                        <button class="delete">X</button></div>`;
                        i = i+1;
                        $(".list").append(content);
                        // document.getElementById("input").value="";
                        // $("#input").attr("value","");
                        // $("#input").value = "";
                        $("#input").val("");
                    //}
                }
            });    

            $(document).on('click','.status',function(e){ //判斷checkbox
                var status = $(this).prop("checked"); //prop回傳true false
                if(status == true){
                    console.log(this);
                    $(this).parent().children("label").css({"text-decoration": "line-through"});
                }
                else{
                    console.log(this);
                    $(this).parent().children("label").css({"text-decoration": "none"});
                }
            });
            
            $(document).on('click','.delete',function(){
                $(this).parent().remove();
            });
            
            $(document).on('click','.delete',function(){
                $("#draggable").draggable();
            });
            
        });
    </script>
</body>
</html>